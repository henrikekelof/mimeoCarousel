var _mCarousel;(function(q,G,s){var x,C,d=G.createElement("div"),D=d.style,t=q.Modernizr||{},E=["ms","O","Moz","Webkit"],o={transform:"transform",msTransform:"-ms-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",WebkitTransform:"-webkit-transform"};if(q.getComputedStyle){G.body.insertBefore(d,null)}function y(H){return Object.prototype.toString.call(H)==="[object String]"}function v(H){return H.charAt(0).toUpperCase()+H.slice(1)}function h(J){if(!y(J)){return}if(J in D){return J}J=v(J);for(var I=0,H=E.length;I<H;I+=1){if(E[I]+J in D){return E[I]+J}}}function f(H,J){var I;d.style[H]=J;I=q.getComputedStyle(d).getPropertyValue(o[H]);if(I!==s&&I.length>0&&I!=="none"){return true}return false}C={transition:h("transition"),transitionDuration:h("transitionDuration"),transform:h("transform")};C.transformProp=C.transform?o[C.transform]:false;C.translate3d=(C.transform)?f(C.transform,"translate3d(1px,0,0)"):false;C.touch=(t.touch)?t.touch:"ontouchstart" in G.documentElement;if(q.getComputedStyle){G.body.removeChild(d)}function w(I,H){var J;for(J in H){if(H.hasOwnProperty(J)){I[J]=H[J]}}return I}x=Array.isArray||function(H){return Object.prototype.toString.call(H)==="[object Array]"};function z(H){return Object.prototype.toString.call(H)==="[object Number]"}function e(H){return parseInt(H.offsetWidth,10)}function A(J,H,I){if(J.addEventListener){J.addEventListener(H,I,false);return}if(J.attachEvent){J.attachEvent("on"+H,I);return}}function r(O,I,N,M){var K,J,P,L,H=0;P=parseInt(O.style.marginLeft,10);J=M/10;L=(N-P)/J;K=q.setInterval(function(){H+=1;if(H===J){O.style.marginLeft=N+"%";clearInterval(K);return}P=P+L;O.style.marginLeft=P+"%"},10)}function n(J,H){var I;for(I in H){if(H.hasOwnProperty){J.style[I]=H[I]}}}_mCarousel=function(I,H){H=w({visible:1,move:1,start:1,speed:300,after:s,before:s,sensitivity:0.25,glimpseLeft:0,glimpseRight:0,prev:"Prev",next:"Next"},H?H:{});this.settings=H;this.carousel=I;this.container=I.children[0];this.items=this.container.children;this.lastBreak=false;this.breakAtLow=false;this.breakAtHigh=false;if(x(H.visible)){this.breakpoints=H.visible;this.visible=j.apply(this);this.move=this.visible;this.glimpseLeft=(this.lastBreak[2])?this.lastBreak[2]:0;this.glimpseRight=(this.lastBreak[3])?this.lastBreak[3]:0}else{this.breakpoints=false;this.visible=H.visible;this.move=H.move;this.glimpseLeft=H.glimpseLeft;this.glimpseRight=H.glimpseRight}this.position=H.start;this.length=this.items.length;this.max=this.length-this.visible+1;B.apply(this)};_mCarousel.prototype={moveTo:function(K){var H,J,I;if(this.settings.before){this.settings.before.call(this,this)}K=z(K)?K:parseInt(K,10);K=(K<1)?1:(K>this.max)?this.max:K;this.position=K;J=(1/this.length)*(K-1)*-100;if(C.transitionDuration){this.container.style[C.transitionDuration]=this.settings.speed+"ms"}l.apply(this);if(this.settings.after){I=this;setTimeout(function(){I.settings.after.call(I,I)},this.settings.speed)}if(C.translate3d){this.container.style[C.transform]="translate3d("+J+"%,0,0)";return}if(C.transform&&C.transitionDuration){this.container.style[C.transform]="translateX("+J+"%)";return}H=(K-1)*(1-this.glimpseRight-this.glimpseLeft)/this.visible*-100;r(this.container,"marginLeft",H,this.settings.speed)},prev:function(){var H=this.position-this.move;if(H<1&&this.position>1){H=1}if(H<1){H=this.max}this.moveTo(H)},next:function(){var H=this.position+this.move;if(H>this.max&&this.position<this.max){H=this.max}if(H>this.max){H=1}this.moveTo(H)},setSize:function(H){if(!H){return}this.visible=H;this.move=H;this.max=this.length-this.visible+1;c.call(this,true);u.apply(this);if(this.position>this.max){this.moveTo(this.max)}}};function B(){var I=this,H;if(C.transformProp&&C.transition){this.container.style[C.transition]=C.transformProp+" "+this.settings.speed+"ms"}c.call(this,true);g.apply(this);u.apply(this);l.apply(this);if(I.breakpoints){p.apply(this)}H=function(){i.apply(I)};A(q,"resize",H);A(q,"orientationchange",function(){setTimeout(H,10)});if(C.touch&&G.addEventListener){a.apply(I)}this.moveTo(this.position)}function a(){var H=this;H.container.addEventListener("touchstart",function(I){k.call(H,I)});H.container.addEventListener("touchmove",function(I){m.call(H,I)});H.container.addEventListener("touchend",function(I){b.call(H,I)});H.container.addEventListener("touchcancel",function(I){b.call(H,I)})}function p(){var I,H;for(I=0,H=this.breakpoints.length;I<H;I+=1){if(this.lastBreak[0]===this.breakpoints[I][0]){break}}this.breakAtLow=(I<1)?[0,0]:this.breakpoints[I-1];this.breakAtHigh=(I<this.breakpoints.length-1)?this.breakpoints[I+1]:[Math.max(q.screen.width,q.screen.height)*2,0];this.glimpseLeft=(this.lastBreak[2])?this.lastBreak[2]:0;this.glimpseRight=(this.lastBreak[3])?this.lastBreak[3]:0}function g(){var J,I,M,H,K,L=this;M=G.createElement("div");H=G.createElement("div");H.className="mCarousel-pager";for(J=0,I=this.length;J<I;J+=1){K=G.createElement("a");K.setAttribute("href","#moveTo"+(J+1));K.innerHTML=(J+1);H.appendChild(K)}A(H,"click",function(O){var P=O.target||O.srcElement,N=P.getAttribute("href");if(N){N=N.replace(/[^0-9.]/g,"");L.moveTo(parseInt(N,10))}return false});M.appendChild(H);if(!C.touch){K=G.createElement("a");K.setAttribute("href","#prev");K.className="mCarousel-prev";K.innerHTML=this.settings.prev;A(K,"click",function(){L.prev();return false});M.appendChild(K);K=G.createElement("a");K.setAttribute("href","#next");K.className="mCarousel-next";K.innerHTML=this.settings.next;A(K,"click",function(){L.next();return false});M.appendChild(K)}this.carousel.appendChild(M);this.pagerLinks=M.getElementsByTagName("DIV")[0].childNodes;this.nav=M}function F(H,I){return !(I===1||H%I===0)}function l(){var J,I,H,K=this.position-1;for(J=0,I=this.length;J<I;J+=1){if(J===K||(J>K&&J<K+this.visible)){H="visible"}else{H=""}if(F(J,this.visible)){H+=" grouped"}if(this.pagerLinks&&this.pagerLinks[J]){this.pagerLinks[J].className=H}}}function u(){if(this.visible===this.length){this.nav.style.display="none";return}this.nav.style.display=""}function c(K){var J,I,H;J=e(this.carousel)*this.length*(1-this.glimpseRight-this.glimpseLeft)/this.visible;n(this.container,{width:J+"px",marginLeft:(this.glimpseLeft)*100+"%",marginRight:(this.glimpseRight)*100+"%"});if(K){J=1/this.length*100+"%";for(I=0,H=this.items.length;I<H;I+=1){this.items[I].style.width=J}}}function j(){var H=e(G.documentElement),J,I;for(J=0,I=this.breakpoints.length;J<I;J+=1){if(H>=this.breakpoints[J][0]){this.lastBreak=this.breakpoints[J]}else{break}}if(!this.lastBreak){this.lastBreak=[1,1]}return this.lastBreak[1]}function i(){if(this.breakpoints){var H=e(G.documentElement);if(H<this.lastBreak[0]){if(this.breakAtLow[1]!==this.lastBreak[1]){this.setSize(this.breakAtLow[1]);l.apply(this)}this.lastBreak=this.breakAtLow;p.apply(this);return}if(H>=this.breakAtHigh[0]){if(this.breakAtHigh[1]!==this.lastBreak[1]){this.setSize(this.breakAtHigh[1]);l.apply(this)}this.lastBreak=this.breakAtHigh;p.apply(this);return}}c.call(this)}function k(H){H.stopPropagation();this.start={pageX:H.touches[0].pageX,pageY:H.touches[0].pageY};this.isScrolling=s;this.deltaX=0;this.container.style[C.transitionDuration]="0"}function m(H){var K,J,I;if(H.touches.length>1||H.scale&&H.scale!==1){return}this.deltaX=H.touches[0].pageX-this.start.pageX;if(this.isScrolling===s){this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(H.touches[0].pageY-this.start.pageY))}if(!this.isScrolling){H.preventDefault();H.stopPropagation();J=e(this.container);I=J/this.length;if((this.deltaX>0&&this.position===1)||(this.deltaX<0&&this.position===this.max)){this.deltaX=this.deltaX/(Math.abs(this.deltaX)/I+1)}K=(this.deltaX-(this.position-1)*(J/this.length));this.container.style[C.transform]="translate3d("+K+"px,0,0)"}}function b(J){J.stopPropagation();var K,M,L,I,H;if(!this.isScrolling){K=e(this.container);M=K/this.length*this.visible*this.settings.sensitivity;L=Math.abs(this.deltaX)>M;I=(this.deltaX>0&&this.position>1)||(this.deltaX<0&&this.position<this.max);H=this.position;if(L&&I){H+=(this.deltaX<0?1:-1)*this.move}if(H>this.max){H=this.max}if(H<1){H=1}this.moveTo(H)}}}(window,document));