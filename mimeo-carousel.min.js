var _mCarousel;(function(e,t,n){"use strict";function f(e){return Object.prototype.toString.call(e)==="[object String]"}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e){if(!f(e)){return}if(e in o){return e}e=l(e);for(var t=0,n=a.length;t<n;t+=1){if(a[t]+e in o){return a[t]+e}}}function h(e,t){var r,i={transform:"transform",msTransform:"-ms-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",WebkitTransform:"-webkit-transform"};s.style[e]=t;r=window.getComputedStyle(s).getPropertyValue(i[e]);if(r!==n&&r.length>0&&r!=="none"){return true}return false}function p(e,t){var n;for(n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}return e}function d(e){return Object.prototype.toString.call(e)==="[object Number]"}function v(e){return parseInt(e.offsetWidth,10)}function m(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false);return}if(e.attachEvent){e.attachEvent("on"+t,n);return}}function g(e,t,n,r){var i,s,o,u,a=0;o=parseInt(e.style.marginLeft,10);s=r/10;u=(n-o)/s;i=window.setInterval(function(){a+=1;if(a===s){e.style.marginLeft=n+"%";clearInterval(i);return}o=o+u;e.style.marginLeft=o+"%"},10)}function y(e,t){var n;for(n in t){if(t.hasOwnProperty){e.style[n]=t[n]}}}function b(){var n=this,r;C.call(this,true);S.apply(this);N.apply(this);T.apply(this);if(n.breakpoints){E.apply(this)}r=function(){L.apply(n)};m(e,"resize",r);m(e,"orientationchange",function(){setTimeout(r,10)});if(i.touch&&t.addEventListener){w.apply(n)}if(this.position!==1){this.goto(this.position)}}function w(){var e=this;e.container.addEventListener("touchstart",function(t){A.call(e,t)});e.container.addEventListener("touchmove",function(t){O.call(e,t)});e.container.addEventListener("touchend",function(t){M.call(e,t)});e.container.addEventListener("touchcancel",function(t){M.call(e,t)})}function E(){var e,t;for(e=0,t=this.breakpoints.length;e<t;e+=1){if(this.lastBreak[0]===this.breakpoints[e][0]){break}}this.breakAtLow=e<1?[0,0]:this.breakpoints[e-1];this.breakAtHigh=e<this.breakpoints.length-1?this.breakpoints[e+1]:[Math.max(window.screen.width,window.screen.height)*2,0];this.glimpseLeft=this.lastBreak[2]?this.lastBreak[2]:0;this.glimpseRight=this.lastBreak[3]?this.lastBreak[3]:0}function S(){var e,n,r,s,o,u=this;r=t.createElement("div");s=t.createElement("div");s.className="mCarousel-pager";for(e=0,n=this.length;e<n;e+=1){o=t.createElement("a");o.setAttribute("href","#goto"+(e+1));o.innerHTML=e+1;s.appendChild(o)}m(s,"click",function(e){var t=e.target||e.srcElement,n=t.getAttribute("href");if(n){n=n.replace(/[^0-9.]/g,"");u.goto(parseInt(n,10))}return false});r.appendChild(s);if(!i.touch){o=t.createElement("a");o.setAttribute("href","#prev");o.className="mCarousel-prev";o.innerHTML=this.settings.prev;m(o,"click",function(){u.prev();return false});r.appendChild(o);o=t.createElement("a");o.setAttribute("href","#next");o.className="mCarousel-next";o.innerHTML=this.settings.next;m(o,"click",function(){u.next();return false});r.appendChild(o)}this.carousel.appendChild(r);this.pagerLinks=r.getElementsByTagName("DIV")[0].childNodes;this.nav=r}function x(e,t){return!(t===1||e%t===0)}function T(){var e,t,n,r=this.position-1;for(e=0,t=this.length;e<t;e+=1){if(e===r||e>r&&e<r+this.visible){n="visible"}else{n=""}if(x(e,this.visible)){n+=" grouped"}if(this.pagerLinks&&this.pagerLinks[e]){this.pagerLinks[e].className=n}}}function N(){if(this.visible===this.length){this.nav.style.display="none";return}this.nav.style.display=""}function C(e){var t,n,r;t=v(this.carousel)*this.length*(1-this.glimpseRight-this.glimpseLeft)/this.visible;y(this.container,{width:t+"px",marginLeft:this.glimpseLeft*100+"%",marginRight:this.glimpseRight*100+"%"});if(e){t=1/this.length*100+"%";for(n=0,r=this.items.length;n<r;n+=1){this.items[n].style.width=t}}}function k(){var e=v(t.documentElement),n,r;for(n=0,r=this.breakpoints.length;n<r;n+=1){if(e>=this.breakpoints[n][0]){this.lastBreak=this.breakpoints[n]}else{break}}if(!this.lastBreak){this.lastBreak=[1,1]}return this.lastBreak[1]}function L(){if(this.breakpoints){var e=v(t.documentElement);if(e<this.lastBreak[0]){if(this.breakAtLow[1]!==this.lastBreak[1]){this.setSize(this.breakAtLow[1]);T.apply(this)}this.lastBreak=this.breakAtLow;E.apply(this);return}if(e>=this.breakAtHigh[0]){if(this.breakAtHigh[1]!==this.lastBreak[1]){this.setSize(this.breakAtHigh[1]);T.apply(this)}this.lastBreak=this.breakAtHigh;E.apply(this);return}}C.call(this)}function A(e){e.stopPropagation();this.start={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY};this.isScrolling=n;this.deltaX=0;this.container.style[i.transitionDuration]="0"}function O(e){var t,r,s;if(e.touches.length>1||e.scale&&e.scale!==1){return}this.deltaX=e.touches[0].pageX-this.start.pageX;if(this.isScrolling===n){this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(e.touches[0].pageY-this.start.pageY))}if(!this.isScrolling){e.preventDefault();e.stopPropagation();r=v(this.container);s=r/this.length;if(this.deltaX>0&&this.position===1||this.deltaX<0&&this.position===this.max){this.deltaX=this.deltaX/(Math.abs(this.deltaX)/s+1)}t=this.deltaX-(this.position-1)*(r/this.length);this.container.style[i.transform]="translate3d("+t+"px,0,0)"}}function M(e){e.stopPropagation();var t,n,r,i,s;if(!this.isScrolling){t=v(this.container);n=t/this.length*this.visible*this.settings.sensitivity;r=Math.abs(this.deltaX)>n;i=this.deltaX>0&&this.position>1||this.deltaX<0&&this.position<this.max;s=this.position;if(r&&i){s+=(this.deltaX<0?1:-1)*this.move}if(s>this.max){s=this.max}if(s<1){s=1}this.goto(s)}}var r,i,s=t.createElement("div"),o=s.style,u=window.Modernizr||{},a=["ms","O","Moz","Webkit"];if(window.getComputedStyle){document.body.insertBefore(s,null)}i={transitionDuration:c("transitionDuration"),transform:c("transform")};i.translate3d=i.transform?h(i.transform,"translate3d(1px,0,0)"):false;i.touch=u.touch?u.touch:"ontouchstart"in t.documentElement;if(window.getComputedStyle){document.body.removeChild(s)}r=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};_mCarousel=function(e,t){t=p({visible:1,move:1,start:1,speed:300,after:n,before:n,sensitivity:.25,glimpseLeft:0,glimpseRight:0,prev:"Prev",next:"Next"},t?t:{});this.settings=t;this.carousel=e;this.container=e.children[0];this.items=this.container.children;this.lastBreak=false;this.breakAtLow=false;this.breakAtHigh=false;if(r(t.visible)){this.breakpoints=t.visible;this.visible=k.apply(this);this.move=this.visible;this.glimpseLeft=this.lastBreak[2]?this.lastBreak[2]:0;this.glimpseRight=this.lastBreak[3]?this.lastBreak[3]:0}else{this.breakpoints=false;this.visible=t.visible;this.move=t.move;this.glimpseLeft=t.glimpseLeft;this.glimpseRight=t.glimpseRight}this.position=t.start;this.length=this.items.length;this.max=this.length-this.visible+1;b.apply(this)};_mCarousel.prototype={"goto":function(e){var t,n,r;if(this.settings.before){this.settings.before.call(this,this)}e=d(e)?e:parseInt(e,10);e=e<1?1:e>this.max?this.max:e;this.position=e;n=1/this.length*(e-1)*-100;if(i.transitionDuration){this.container.style[i.transitionDuration]=""}T.apply(this);if(this.settings.after){r=this;setTimeout(function(){r.settings.after.call(r,r)},this.settings.speed)}if(i.translate3d){this.container.style[i.transform]="translate3d("+n+"%,0,0)";return}if(i.transform&&i.transitionDuration){this.container.style[i.transform]="translateX("+n+"%)";return}t=(e-1)*(1-this.glimpseRight-this.glimpseLeft)/this.visible*-100;g(this.container,"marginLeft",t,this.settings.speed)},prev:function(){var e=this.position-this.move;if(e<1&&this.position>1){e=1}if(e<1){e=this.max}this.goto(e)},next:function(){var e=this.position+this.move;if(e>this.max&&this.position<this.max){e=this.max}if(e>this.max){e=1}this.goto(e)},setSize:function(e){if(!e){return}this.visible=e;this.move=e;this.max=this.length-this.visible+1;C.call(this,true);N.apply(this);if(this.position>this.max){this.goto(this.max)}}}})(window,document)